// nextflow.config

conda.enabled = true

// process GENERATE_HTML parameters
params.html_in = "jinja/html_csv_test.csv"
params.template_html = "sc-analysis-nf/jinja/templates/index.html"
params.html_out = "output/index.html"

// process SOUP parameters
////////////////////////////////Edit These Two Inputs//////////////////////////////////////////////////////
params.soup_in = "/Users/nlg143/projects/sc-analysis-nf/input/FCAImmP7241240/output/Gene/filtered/ "
params.soup_raw_in = "/Users/nlg143/projects/sc-analysis-nf/input/FCAImmP7241240/output/Gene/raw/"
//////////////////////////////////////////////////////////////////////////////////////////////////////////
params.soup_barcodes_out = "soup/barcodes.tsv"
params.soup_genes_out = "soup/genes.tsv"
params.soup_matrix_out = "soup/matrix.mtx"
params.soup_plot = "soup.channel.png"

// process LOAD_DATA parameters
params.load_in = "/Users/nlg143/projects/sc-analysis-nf/output/FCAImmP7241240/soup"
/////////////////////////////Edit This Input File/////////////////////////////////////////////////////////
params.load_metadata = "/Users/nlg143/projects/sc-analysis-nf/input/old_raw_metadata.csv"
//////////////////////////////////////////////////////////////////////////////////////////////////////////
params.load_raw_out = "Fskin_0_1_1_raw.h5ad"
params.load_meta_out = "Fskin_obj_0_2_1.h5ad"

// process SCRUBLET parameters
params.scrub_in = "/Users/nlg143/projects/sc-analysis-nf/output/FCAImmP7241240/Fskin_obj_0_2_1.h5ad"
params.scrub_out = "Fskin_obj_0_3_1.h5ad"
params.scrub_histogram = "scrublet_histogram.png"
params.scrub_umap = "scrublet_umap.png"

// process SCANPY parameters
params.scanpy_in = "/Users/nlg143/projects/sc-analysis-nf/output/FCAImmP7241240/Fskin_obj_0_3_1.h5ad"
params.scanpy_plot1 = "qcmetrics_totalcounts.png"
params.scanpy_plot2 = "figures/violin_qcmetrics_pctcountsmt.png"
params.scanpy_plot3 = "figures/scatter_qcmetrics.png"
params.scanpy_plot4 = "figures/violin_all_counts.png"
params.scanpy_plot5 = "figures/violin_qc_all_counts.png"
params.scanpy_plot6 = "figures/highest_expr_genes_FCAImmP7241240.png"  
params.scanpy_plot7 = "figures/filter_genes_dispersion_scatter_FCAImmP7241240.png"
params.scanpy_plot8 = "figures/pca_FCAImmP7241240.png"
params.scanpy_plot9 = "figures/pca_variance_ratio_FCAImmP7241240.png"
params.scanpy_plot10 = "figures/umap_neighbour_FCAImmP7241240.png"
params.scanpy_plot11 = "figures/umap_doubletscores.png"
params.scanpy_plot12 = "figures/umap_qc_doubletscores.png"
params.scanpy_plot13 = "figures/umap_leiden.png"
params.scanpy_plot14 = "figures/umap_pct_counts.png"
params.scanpy_plot15 = "figures/violin_leiden_pct_counts.png"
params.scanpy_plot16 = "figures/umap_cellcycle.png"
params.scanpy_plot17 = "figures/violin_cellcycle.png"
params.scanpy_plot18 = "figures/violin_outlier.png"
params.scanpy_plot19 = "figures/umap_plot19.png"
params.scanpy_plot20 = "figures/umap_plot20_leiden.png"
params.scanpy_plot21 = "figures/violin_pctcounts_leiden.png"
params.scanpy_plot22 = "figures/violin_outlier_leiden.png"
params.scanpy_plot23 = "figures/umap_cellcycle_leiden.png"
params.scanpy_plot24 = "figures/pca_plot24_normalised.png"
params.scanpy_plot25 = "figures/umap_metadata.png"
params.scanpy_plot26 = "figures/violin_n_genes_by_counts_sangerid.png"
params.scanpy_plot27 = "figures/violin_total_counts_sangerid.png"
params.scanpy_plot28 = "figures/violin_pct_counts_mt_sangerid.png"
params.scanpy_out = "Fskin_obj_0_4_1.h5ad"



// yaml file used to make the conda environment needed for 'READ|PREPRO|PCA|M_GENES'

process {
    withName: 'READ|PREPRO|PCA|M_GENES|GENERATE_HTML' {
        conda = "$projectDir/envs/environment.yaml"
    }
}
process {
    withName: 'SOUP|LOAD_DATA|SCRUBLET|SCANPY' {
        conda = "$projectDir/envs/cellrank.yaml"
    }
}